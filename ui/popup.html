<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Invitation notepad</title>
  <link rel="stylesheet" type="text/css" href="../css/style.css">
  <style>
    body {
      width: 350px;
      min-height: 400px;
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }
    
    .container {
      padding: 20px;
    }
    
    .popup-header {
      text-align: center;
      margin-bottom: 20px;
      border-bottom: 1px solid #e5e7eb;
      padding-bottom: 15px;
    }
    
    .popup-header h2 {
      margin: 0 0 5px 0;
      color: #1a1a1a;
      font-size: 18px;
    }
    
    .version {
      margin: 0;
      color: #6b7280;
      font-size: 12px;
    }
    
    .api-key-section, .saved-messages-section, .quick-actions {
      margin-bottom: 20px;
    }
    
    .api-key-section h3, .saved-messages-section h3, .quick-actions h3 {
      margin: 0 0 10px 0;
      font-size: 14px;
      color: #374151;
    }
    
    .status-indicator {
      margin-bottom: 10px;
      font-size: 13px;
    }
    
    .success { color: #10b981; }
    .warning { color: #f59e0b; }
    .error { color: #ef4444; }
    .loading { color: #6b7280; }
    
    .count {
      margin-bottom: 10px;
      font-size: 13px;
      color: #6b7280;
    }
    
    .btn {
      width: 100%;
      padding: 8px 12px;
      border: none;
      border-radius: 6px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      margin-bottom: 8px;
    }
    
    .btn-primary {
      background: #0077b5;
      color: white;
    }
    
    .btn-primary:hover {
      background: #005885;
    }
    
    .btn-secondary {
      background: #6b7280;
      color: white;
    }
    
    .btn-secondary:hover {
      background: #4b5563;
    }
    
    .btn-outline {
      background: transparent;
      color: #374151;
      border: 1px solid #d1d5db;
    }
    
    .btn-outline:hover {
      background: #f9fafb;
    }
    
    .footer {
      margin-top: 20px;
      padding-top: 15px;
      border-top: 1px solid #e5e7eb;
      text-align: center;
    }
    
    .footer p {
      margin: 0;
      font-size: 11px;
      color: #9ca3af;
      line-height: 1.4;
    }
    
    /* Modal styles */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10000;
    }
    
    .modal {
      background: white;
      border-radius: 8px;
      padding: 20px;
      max-width: 400px;
      width: 90%;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
    }
    
    .modal.large {
      max-width: 500px;
      max-height: 400px;
    }
    
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .close-btn {
      background: none;
      border: none;
      font-size: 20px;
      cursor: pointer;
      color: #6b7280;
    }
    
    .api-key-input {
      width: 100%;
      padding: 8px 12px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      font-family: monospace;
      margin: 10px 0;
      box-sizing: border-box;
    }
    
    .help-text {
      font-size: 12px;
      color: #6b7280;
      margin: 5px 0;
    }
    
    .help-text a {
      color: #0077b5;
    }
    
    .modal-footer {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }
    
    .modal-footer .btn {
      flex: 1;
      margin-bottom: 0;
    }
    
    .messages-list {
      max-height: 250px;
      overflow-y: auto;
    }
    
    .message-item {
      border: 1px solid #e5e7eb;
      border-radius: 6px;
    }

    /* Tab Navigation */
    .tab-navigation {
      display: flex;
      border-bottom: 1px solid #e5e7eb;
      margin-bottom: 20px;
    }

    .tab-btn {
      flex: 1;
      padding: 10px 12px;
      border: none;
      background: transparent;
      color: #6b7280;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      border-bottom: 2px solid transparent;
      transition: all 0.2s;
    }

    .tab-btn.active {
      color: #0077b5;
      border-bottom-color: #0077b5;
    }

    .tab-btn:hover {
      color: #374151;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    /* Analytics Styles */
    .analytics-stats h3 {
      margin: 0 0 15px 0;
      font-size: 16px;
      color: #1a1a1a;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-bottom: 20px;
    }

    .stat-card {
      background: #f8fafc;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      padding: 15px;
      text-align: center;
    }

    .stat-number {
      font-size: 20px;
      font-weight: 700;
      color: #0077b5;
      margin-bottom: 4px;
    }

    .stat-label {
      font-size: 11px;
      color: #64748b;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .chart-section {
      margin-bottom: 20px;
    }

    .chart-section h4 {
      margin: 0 0 10px 0;
      font-size: 14px;
      color: #374151;
    }

    .activity-chart {
      height: 80px;
      background: #f8fafc;
      border: 1px solid #e2e8f0;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .chart-placeholder {
      color: #9ca3af;
      font-size: 12px;
    }

    .insights-section h4 {
      margin: 0 0 10px 0;
      font-size: 14px;
      color: #374151;
    }

    .insight-item {
      display: flex;
      align-items: center;
      padding: 8px 0;
      border-bottom: 1px solid #f1f5f9;
    }

    .insight-item:last-child {
      border-bottom: none;
    }

    .insight-icon {
      margin-right: 8px;
      font-size: 14px;
    }

    .insight-text {
      font-size: 12px;
      color: #475569;
    }

    /* Settings Styles */
    .settings-section h3 {
      margin: 0 0 15px 0;
      font-size: 16px;
      color: #1a1a1a;
    }

    .setting-group {
      margin-bottom: 15px;
    }

    .setting-label {
      display: block;
      font-size: 13px;
      color: #374151;
      margin-bottom: 5px;
      font-weight: 500;
    }

    .setting-select {
      width: 100%;
      padding: 8px 12px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      font-size: 13px;
      background: white;
      color: #374151;
    }

    .setting-checkbox {
      display: flex;
      align-items: center;
      font-size: 13px;
      color: #374151;
      cursor: pointer;
    }

    .setting-checkbox input {
      margin-right: 8px;
    }

    .export-section {
      margin-top: 20px;
      padding-top: 15px;
      border-top: 1px solid #e5e7eb;
    }

    .export-section h4 {
      margin: 0 0 10px 0;
      font-size: 14px;
      color: #374151;
    }

    .message-item {
      padding: 10px;
      margin-bottom: 10px;
    }
    
    .message-text {
      font-size: 13px;
      line-height: 1.4;
      margin-bottom: 8px;
    }
    
    .message-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 11px;
      color: #6b7280;
    }
    
    .delete-btn {
      background: #ef4444;
      color: white;
      border: none;
      border-radius: 4px;
      padding: 2px 6px;
      font-size: 10px;
      cursor: pointer;
    }
    
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 10px 15px;
      border-radius: 6px;
      font-size: 13px;
      font-weight: 600;
      z-index: 10001;
      transform: translateX(100%);
      transition: transform 0.3s ease;
    }
    
    .notification.show {
      transform: translateX(0);
    }
    
    .notification.success {
      background: #d1fae5;
      color: #065f46;
      border: 1px solid #a7f3d0;
    }
    
    .notification.error {
      background: #fee2e2;
      color: #991b1b;
      border: 1px solid #fecaca;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="popup-header">
      <h2>ü§ù Invitation Notepad</h2>
      <p class="version">v0.3.2</p>
    </div>

    <!-- Add Analytics Tab Navigation -->
    <div class="tab-navigation">
      <button class="tab-btn active" data-tab="overview">Overview</button>
      <button class="tab-btn" data-tab="analytics">Analytics</button>
      <button class="tab-btn" data-tab="settings">Settings</button>
    </div>

         <!-- Overview Tab (existing content) -->
     <div class="tab-content active" id="overview-tab">
       <div class="api-key-section">
         <!-- Content will be dynamically generated by popup.js -->
       </div>
     </div>

     <!-- Analytics Tab -->
     <div class="tab-content" id="analytics-tab">
       <div class="analytics-stats">
         <h3>üìä Message Performance</h3>
         <div class="stats-grid">
           <div class="stat-card">
             <div class="stat-number" id="total-sent">0</div>
             <div class="stat-label">Messages Sent</div>
           </div>
           <div class="stat-card">
             <div class="stat-number" id="response-rate">0%</div>
             <div class="stat-label">Response Rate</div>
           </div>
           <div class="stat-card">
             <div class="stat-number" id="avg-length">0</div>
             <div class="stat-label">Avg. Length</div>
           </div>
           <div class="stat-card">
             <div class="stat-number" id="ai-generated">0</div>
             <div class="stat-label">AI Generated</div>
           </div>
         </div>
         
         <div class="chart-section">
           <h4>Weekly Activity</h4>
           <div class="activity-chart" id="activity-chart">
             <div class="chart-placeholder">üìà Chart will load here</div>
           </div>
         </div>

         <div class="insights-section">
           <h4>üí° Insights</h4>
           <div id="insights-list">
             <div class="insight-item">
               <span class="insight-icon">‚è∞</span>
               <span class="insight-text">Best time to send: Tuesdays 10-11 AM</span>
             </div>
             <div class="insight-item">
               <span class="insight-icon">üìù</span>
               <span class="insight-text">Optimal message length: 120-150 characters</span>
             </div>
           </div>
         </div>
       </div>
     </div>

     <!-- Settings Tab -->
     <div class="tab-content" id="settings-tab">
       <div class="settings-section">
         <h3>‚öôÔ∏è Settings</h3>
         
         <div class="setting-group">
           <label class="setting-label">Auto-generate tone</label>
           <select class="setting-select" id="default-tone">
             <option value="professional">Professional</option>
             <option value="casual">Casual</option>
             <option value="friendly">Friendly</option>
             <option value="assertive">Assertive</option>
           </select>
         </div>

         <div class="setting-group">
           <label class="setting-label">Message length preference</label>
           <select class="setting-select" id="length-preference">
             <option value="short">Short (80-120 chars)</option>
             <option value="medium">Medium (120-180 chars)</option>
             <option value="long">Long (180-250 chars)</option>
           </select>
         </div>

         <div class="setting-group">
           <label class="setting-checkbox">
             <input type="checkbox" id="auto-save"> Auto-save successful messages
           </label>
         </div>

         <div class="setting-group">
           <label class="setting-checkbox">
             <input type="checkbox" id="analytics-tracking"> Enable analytics tracking
           </label>
         </div>
         
         <div class="setting-group">
           <label class="setting-checkbox">
             <input type="checkbox" id="persona-detection"> Enable automatic persona detection
           </label>
         </div>

         <!-- Persona Templates Section -->
         <div class="persona-templates-section" style="margin-top: 20px; padding-top: 15px; border-top: 1px solid #e5e7eb;">
           <h4 style="margin: 0 0 15px 0; font-size: 14px; color: #374151; display: flex; align-items: center; gap: 8px;">
             üé≠ Persona Templates
           </h4>
           
           <div class="persona-template-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 15px;">
             <div class="persona-card" style="padding: 10px; border: 1px solid #e5e7eb; border-radius: 6px; background: #fafafa;">
               <div style="font-size: 12px; font-weight: 600; color: #0077b5; margin-bottom: 4px;">üéØ Recruiters</div>
               <div style="font-size: 10px; color: #666; margin-bottom: 6px;">0 templates</div>
               <button class="btn btn-outline" style="padding: 4px 8px; font-size: 10px;" onclick="managePersonaTemplates('recruiter')">Manage</button>
             </div>
             
             <div class="persona-card" style="padding: 10px; border: 1px solid #e5e7eb; border-radius: 6px; background: #fafafa;">
               <div style="font-size: 12px; font-weight: 600; color: #0077b5; margin-bottom: 4px;">‚öôÔ∏è Eng Managers</div>
               <div style="font-size: 10px; color: #666; margin-bottom: 6px;">0 templates</div>
               <button class="btn btn-outline" style="padding: 4px 8px; font-size: 10px;" onclick="managePersonaTemplates('engineering_manager')">Manage</button>
             </div>
             
             <div class="persona-card" style="padding: 10px; border: 1px solid #e5e7eb; border-radius: 6px; background: #fafafa;">
               <div style="font-size: 12px; font-weight: 600; color: #0077b5; margin-bottom: 4px;">üöÄ Founders</div>
               <div style="font-size: 10px; color: #666; margin-bottom: 6px;">0 templates</div>
               <button class="btn btn-outline" style="padding: 4px 8px; font-size: 10px;" onclick="managePersonaTemplates('founder')">Manage</button>
             </div>
             
             <div class="persona-card" style="padding: 10px; border: 1px solid #e5e7eb; border-radius: 6px; background: #fafafa;">
               <div style="font-size: 12px; font-weight: 600; color: #0077b5; margin-bottom: 4px;">üë§ Generic</div>
               <div style="font-size: 10px; color: #666; margin-bottom: 6px;">0 templates</div>
               <button class="btn btn-outline" style="padding: 4px 8px; font-size: 10px;" onclick="managePersonaTemplates('generic')">Manage</button>
             </div>
           </div>
           
           <div style="text-align: center; margin-bottom: 15px;">
             <button class="btn btn-primary" style="padding: 8px 16px; font-size: 12px;" onclick="createPersonaTemplate()">+ Create Template</button>
           </div>
         </div>

         <div class="export-section">
           <h4>üì§ Data Management</h4>
           <button class="btn btn-outline" id="export-data">Export All Data</button>
           <button class="btn btn-outline" id="import-data">Import Data</button>
           <button class="btn btn-secondary" id="clear-analytics">Clear Analytics</button>
         </div>
       </div>
     </div>
   </div>
  <script src="popup.js"></script>
</body>
</html>